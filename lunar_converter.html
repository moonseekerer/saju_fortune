<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŒë ¥/ì–‘ë ¥ ë³€í™˜ê¸° - ì‚¬ì£¼ ë¶„ì„</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .converter-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        .converter-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .converter-header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, #fff, #74b9ff);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .converter-header p {
            opacity: 0.7;
            font-size: 0.95rem;
        }

        .lang-toggle {
            display: block;
            margin: 0 auto 20px;
            width: fit-content;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 8px 16px;
            color: white;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .lang-toggle:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.2);
            padding: 5px;
            border-radius: 15px;
        }

        .tab-btn {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
            font-weight: 600;
        }

        .tab-btn.active {
            background: linear-gradient(90deg, #54a0ff, #00d2d3);
            color: white;
            box-shadow: 0 4px 15px rgba(84, 160, 255, 0.3);
        }

        .converter-form {
            display: none;
        }

        .converter-form.active {
            display: block;
        }

        .result-box {
            margin-top: 30px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 20px;
            display: none;
        }

        .result-box.show {
            display: block;
            animation: slideUp 0.3s ease;
        }

        .result-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .result-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .result-label {
            font-size: 0.85rem;
            opacity: 0.7;
            margin-bottom: 5px;
        }

        .result-value {
            font-size: 1.3rem;
            font-weight: bold;
            color: #54a0ff;
        }

        .back-link {
            display: inline-block;
            margin-top: 30px;
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            text-decoration: none;
            transition: all 0.3s;
        }

        .back-link:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .info-box {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 193, 7, 0.1);
            border-left: 4px solid #ffc107;
            border-radius: 5px;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body>
    <div class="app-container">
        <div class="converter-container">
            <button class="lang-toggle" onclick="toggleLanguage()">
                <span id="lang-text">ğŸŒ English</span>
            </button>

            <div class="converter-header">
                <h1 data-i18n="converter_title">ğŸ“… ìŒë ¥/ì–‘ë ¥ ë³€í™˜ê¸°</h1>
                <p data-i18n="converter_desc">ìƒë…„ì›”ì¼ì„ ìŒë ¥ê³¼ ì–‘ë ¥ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤</p>
            </div>

            <div class="tab-buttons">
                <button class="tab-btn active" onclick="switchTab('solar')" data-i18n="tab_solar">ì–‘ë ¥ â†’ ìŒë ¥</button>
                <button class="tab-btn" onclick="switchTab('lunar')" data-i18n="tab_lunar">ìŒë ¥ â†’ ì–‘ë ¥</button>
            </div>

            <!-- ì–‘ë ¥ â†’ ìŒë ¥ ë³€í™˜ -->
            <div id="solar-form" class="converter-form active">
                <form onsubmit="convertSolarToLunar(event)">
                    <div class="form-group">
                        <label class="form-label" data-i18n="solar_date_label">ì–‘ë ¥ ìƒë…„ì›”ì¼</label>
                        <div class="row">
                            <div class="col form-group">
                                <input type="number" id="solar-year" class="form-input" placeholder="1990" min="1900"
                                    max="2100" required>
                            </div>
                            <div class="col form-group">
                                <select id="solar-month" class="form-select" onchange="updateSolarDays()" required>
                                    <option value="" data-i18n="select_month">ì›”</option>
                                    <script>for (let i = 1; i <= 12; i++) document.write(`<option value="${i}">${i}ì›”</option>`);</script>
                                </select>
                            </div>
                            <div class="col form-group">
                                <select id="solar-day" class="form-select" required>
                                    <option value="" data-i18n="select_day">ì¼</option>
                                    <script>for (let i = 1; i <= 31; i++) document.write(`<option value="${i}">${i}ì¼</option>`);</script>
                                </select>
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="submit-btn" data-i18n="btn_solar_to_lunar">ìŒë ¥ìœ¼ë¡œ ë³€í™˜í•˜ê¸° ğŸ”„</button>
                </form>
            </div>

            <!-- ìŒë ¥ â†’ ì–‘ë ¥ ë³€í™˜ -->
            <div id="lunar-form" class="converter-form">
                <form onsubmit="convertLunarToSolar(event)">
                    <div class="form-group">
                        <label class="form-label" data-i18n="lunar_date_label">ìŒë ¥ ìƒë…„ì›”ì¼</label>
                        <div class="row">
                            <div class="col form-group">
                                <input type="number" id="lunar-year" class="form-input" placeholder="1990" min="1900"
                                    max="2100" required>
                            </div>
                            <div class="col form-group">
                                <select id="lunar-month" class="form-select" required>
                                    <option value="" data-i18n="select_month">ì›”</option>
                                    <script>for (let i = 1; i <= 12; i++) document.write(`<option value="${i}">${i}ì›”</option>`);</script>
                                </select>
                            </div>
                            <div class="col form-group">
                                <select id="lunar-day" class="form-select" required>
                                    <option value="" data-i18n="select_day">ì¼</option>
                                    <script>for (let i = 1; i <= 30; i++) document.write(`<option value="${i}">${i}ì¼</option>`);</script>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" id="leap-month" style="margin-right: 8px;">
                            <span data-i18n="leap_month">ìœ¤ë‹¬</span>
                        </label>
                    </div>
                    <button type="submit" class="submit-btn" data-i18n="btn_lunar_to_solar">ì–‘ë ¥ìœ¼ë¡œ ë³€í™˜í•˜ê¸° ğŸ”„</button>
                </form>
            </div>

            <!-- ê²°ê³¼ í‘œì‹œ -->
            <div id="result" class="result-box">
                <div class="result-item">
                    <div class="result-label" data-i18n="result_input">ì…ë ¥</div>
                    <div class="result-value" id="input-date"></div>
                </div>
                <div class="result-item">
                    <div class="result-label" data-i18n="result_output">ë³€í™˜ ê²°ê³¼</div>
                    <div class="result-value" id="output-date"></div>
                </div>
            </div>

            <div class="info-box">
                <span data-i18n="info_title">â„¹ï¸ <strong>ì°¸ê³ ì‚¬í•­</strong></span><br>
                <span data-i18n="info_content">
                    â€¢ ìŒë ¥ ë³€í™˜ì€ 1900ë…„~2100ë…„ê¹Œì§€ ì§€ì›ë©ë‹ˆë‹¤<br>
                    â€¢ ìœ¤ë‹¬ì´ ìˆëŠ” ê²½ìš° 'ìœ¤ë‹¬' ì²´í¬ë°•ìŠ¤ë¥¼ ì„ íƒí•˜ì„¸ìš”<br>
                    â€¢ ë³€í™˜ ê²°ê³¼ëŠ” í•œêµ­ í‘œì¤€ì‹œ ê¸°ì¤€ì…ë‹ˆë‹¤<br>
                    â€¢ ì „ë¬¸ ì²œë¬¸ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ì—¬ ì •í™•í•˜ê²Œ ë³€í™˜ë©ë‹ˆë‹¤
                </span>
            </div>

            <div style="text-align: center;">
                <a href="index.html" class="back-link" data-i18n="back_link">â† ì‚¬ì£¼ ë¶„ì„ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript/lunar.js"></script>
    <script src="script.js"></script>
    <script>
        // ë²ˆì—­ ë°ì´í„°
        const CONVERTER_TRANSLATIONS = {
            ko: {
                converter_title: "ğŸ“… ìŒë ¥/ì–‘ë ¥ ë³€í™˜ê¸°",
                converter_desc: "ìƒë…„ì›”ì¼ì„ ìŒë ¥ê³¼ ì–‘ë ¥ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤",
                tab_solar: "ì–‘ë ¥ â†’ ìŒë ¥",
                tab_lunar: "ìŒë ¥ â†’ ì–‘ë ¥",
                solar_date_label: "ì–‘ë ¥ ìƒë…„ì›”ì¼",
                lunar_date_label: "ìŒë ¥ ìƒë…„ì›”ì¼",
                select_month: "ì›”",
                select_day: "ì¼",
                leap_month: "ìœ¤ë‹¬",
                btn_solar_to_lunar: "ìŒë ¥ìœ¼ë¡œ ë³€í™˜í•˜ê¸° ğŸ”„",
                btn_lunar_to_solar: "ì–‘ë ¥ìœ¼ë¡œ ë³€í™˜í•˜ê¸° ğŸ”„",
                result_input: "ì…ë ¥",
                result_output: "ë³€í™˜ ê²°ê³¼",
                info_title: "â„¹ï¸ <strong>ì°¸ê³ ì‚¬í•­</strong>",
                info_content: "â€¢ ìŒë ¥ ë³€í™˜ì€ 1900ë…„~2100ë…„ê¹Œì§€ ì§€ì›ë©ë‹ˆë‹¤<br>â€¢ ìœ¤ë‹¬ì´ ìˆëŠ” ê²½ìš° 'ìœ¤ë‹¬' ì²´í¬ë°•ìŠ¤ë¥¼ ì„ íƒí•˜ì„¸ìš”<br>â€¢ ë³€í™˜ ê²°ê³¼ëŠ” í•œêµ­ í‘œì¤€ì‹œ ê¸°ì¤€ì…ë‹ˆë‹¤<br>â€¢ ì „ë¬¸ ì²œë¬¸ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ì—¬ ì •í™•í•˜ê²Œ ë³€í™˜ë©ë‹ˆë‹¤",
                back_link: "â† ì‚¬ì£¼ ë¶„ì„ìœ¼ë¡œ ëŒì•„ê°€ê¸°",
                error_invalid_date: "ì˜¬ë°”ë¥¸ ë‚ ì§œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.",
                solar_prefix: "ì–‘ë ¥",
                lunar_prefix: "ìŒë ¥",
                year_suffix: "ë…„",
                month_suffix: "ì›”",
                day_suffix: "ì¼",
                leap_suffix: " (ìœ¤ë‹¬)"
            },
            en: {
                converter_title: "ğŸ“… Lunar/Solar Converter",
                converter_desc: "Convert birth date between Lunar and Solar calendar",
                tab_solar: "Solar â†’ Lunar",
                tab_lunar: "Lunar â†’ Solar",
                solar_date_label: "Solar Birth Date",
                lunar_date_label: "Lunar Birth Date",
                select_month: "Month",
                select_day: "Day",
                leap_month: "Leap Month",
                btn_solar_to_lunar: "Convert to Lunar ğŸ”„",
                btn_lunar_to_solar: "Convert to Solar ğŸ”„",
                result_input: "Input",
                result_output: "Result",
                info_title: "â„¹ï¸ <strong>Notice</strong>",
                info_content: "â€¢ Lunar conversion supports 1900~2100<br>â€¢ Check 'Leap Month' if applicable<br>â€¢ Results are based on Korean Standard Time<br>â€¢ Accurate conversion using professional astronomical algorithms",
                back_link: "â† Back to Saju Analysis",
                error_invalid_date: "Please enter a valid date.",
                solar_prefix: "Solar",
                lunar_prefix: "Lunar",
                year_suffix: "",
                month_suffix: "/",
                day_suffix: "",
                leap_suffix: " (Leap)"
            }
        };

        let converterLang = 'ko';

        function toggleLanguage() {
            converterLang = converterLang === 'ko' ? 'en' : 'ko';
            document.getElementById('lang-text').textContent = converterLang === 'ko' ? 'ğŸŒ English' : 'ğŸŒ í•œêµ­ì–´';
            applyConverterTranslations();
        }

        function applyConverterTranslations() {
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (CONVERTER_TRANSLATIONS[converterLang][key]) {
                    el.innerHTML = CONVERTER_TRANSLATIONS[converterLang][key];
                }
            });
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            document.querySelectorAll('.converter-form').forEach(form => form.classList.remove('active'));
            document.getElementById(tab + '-form').classList.add('active');

            document.getElementById('result').classList.remove('show');
        }

        // ì–‘ë ¥ ì›”ë³„ ì¼ìˆ˜ ì—…ë°ì´íŠ¸
        function updateSolarDays() {
            const year = parseInt(document.getElementById('solar-year').value) || 2000;
            const month = parseInt(document.getElementById('solar-month').value);
            const daySelect = document.getElementById('solar-day');

            if (!month) return;

            const daysInMonth = new Date(year, month, 0).getDate();
            const currentDay = daySelect.value;

            daySelect.innerHTML = `<option value="">${CONVERTER_TRANSLATIONS[converterLang].select_day}</option>`;
            for (let i = 1; i <= daysInMonth; i++) {
                daySelect.innerHTML += `<option value="${i}">${i}${CONVERTER_TRANSLATIONS[converterLang].day_suffix}</option>`;
            }

            if (currentDay && currentDay <= daysInMonth) {
                daySelect.value = currentDay;
            }
        }

        // ì •í™•í•œ ìŒë ¥ ë³€í™˜ (lunar-javascript ì‚¬ìš©)
        function convertSolarToLunar(e) {
            e.preventDefault();

            const year = parseInt(document.getElementById('solar-year').value);
            const month = parseInt(document.getElementById('solar-month').value);
            const day = parseInt(document.getElementById('solar-day').value);

            // ì…ë ¥ ê²€ì¦
            if (isNaN(year) || isNaN(month) || isNaN(day)) {
                alert(CONVERTER_TRANSLATIONS[converterLang].error_invalid_date);
                return;
            }

            try {
                // Solar ê°ì²´ ìƒì„± (ì–‘ë ¥)
                const solar = Solar.fromYmd(year, month, day);
                // Lunar ê°ì²´ë¡œ ë³€í™˜ (ìŒë ¥)
                const lunar = solar.getLunar();

                const lunarYear = lunar.getYear();
                const lunarMonth = lunar.getMonth();
                const lunarDay = lunar.getDay();
                const isLeap = lunar.getMonth() < 0; // lunar-javascriptì—ì„œ ìŒìˆ˜ ì›”ì€ ìœ¤ë‹¬ì„ ì˜ë¯¸

                const t = CONVERTER_TRANSLATIONS[converterLang];
                document.getElementById('input-date').textContent =
                    `${t.solar_prefix} ${year}${t.year_suffix} ${month}${t.month_suffix}${day}${t.day_suffix}`;

                let resultText = `${t.lunar_prefix} ${lunarYear}${t.year_suffix} ${Math.abs(lunarMonth)}${t.month_suffix}${lunarDay}${t.day_suffix}`;
                if (isLeap) resultText += t.leap_suffix;

                document.getElementById('output-date').textContent = resultText;
                document.getElementById('result').classList.add('show');
            } catch (error) {
                alert(CONVERTER_TRANSLATIONS[converterLang].error_invalid_date);
                console.error(error);
            }
        }

        function convertLunarToSolar(e) {
            e.preventDefault();

            const year = parseInt(document.getElementById('lunar-year').value);
            const month = parseInt(document.getElementById('lunar-month').value);
            const day = parseInt(document.getElementById('lunar-day').value);
            const isLeap = document.getElementById('leap-month').checked;

            // ì…ë ¥ ê²€ì¦
            if (isNaN(year) || isNaN(month) || isNaN(day)) {
                alert(CONVERTER_TRANSLATIONS[converterLang].error_invalid_date);
                return;
            }

            try {
                // Lunar ê°ì²´ ìƒì„± (ìŒë ¥)
                // lunar-javascript: monthê°€ ìŒìˆ˜ë©´ ìœ¤ë‹¬
                const lunar = Lunar.fromYmd(year, isLeap ? -month : month, day);
                // Solar ê°ì²´ë¡œ ë³€í™˜ (ì–‘ë ¥)
                const solar = lunar.getSolar();

                const solarYear = solar.getYear();
                const solarMonth = solar.getMonth();
                const solarDay = solar.getDay();

                const t = CONVERTER_TRANSLATIONS[converterLang];
                document.getElementById('input-date').textContent =
                    `${t.lunar_prefix} ${year}${t.year_suffix} ${month}${t.month_suffix}${day}${t.day_suffix}` +
                    (isLeap ? t.leap_suffix : '');

                document.getElementById('output-date').textContent =
                    `${t.solar_prefix} ${solarYear}${t.year_suffix} ${solarMonth}${t.month_suffix}${solarDay}${t.day_suffix}`;

                document.getElementById('result').classList.add('show');
            } catch (error) {
                alert(CONVERTER_TRANSLATIONS[converterLang].error_invalid_date);
                console.error(error);
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.addEventListener('DOMContentLoaded', () => {
            applyConverterTranslations();
            document.getElementById('solar-year').addEventListener('change', updateSolarDays);
        });
    </script>
</body>

</html>