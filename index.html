<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>사주 분석 어플리케이션</title>
    <!-- CSS 분리 -->
    <link rel="stylesheet" href="style.css?v=20260205015633">
</head>

<body>
    <div class="app-container">
        <!-- 1. 입력 화면 -->
        <div id="input-screen" class="input-section">
            <div class="logo-area">
                <h1>2026년 나의 사주</h1>
                <p>생년월일을 입력하면 당신의 사주를 분석해드립니다.</p>
            </div>

            <form onsubmit="analyzeSaju(event)">
                <div class="form-group">
                    <label class="form-label" for="userName">이름 또는 닉네임</label>
                    <input type="text" id="userName" class="form-input" placeholder="이름을 입력하세요 (닉네임 권장)" required>
                </div>

                <div class="form-group">
                    <label class="form-label">성별 (대운 분석 등에 활용)</label>
                    <div class="gender-selection">
                        <label class="gender-option">
                            <input type="radio" name="userGender" value="male" checked>
                            <span class="gender-btn">남성</span>
                        </label>
                        <label class="gender-option">
                            <input type="radio" name="userGender" value="female">
                            <span class="gender-btn">여성</span>
                        </label>
                    </div>
                </div>

                <div class="row">
                    <div class="col form-group">
                        <label class="form-label">생년</label>
                        <input type="number" id="birthYear" class="form-input" placeholder="1990" min="1900" max="2100"
                            required>
                    </div>
                    <div class="col form-group">
                        <label class="form-label">월</label>
                        <select id="birthMonth" class="form-select" required>
                            <option value="">선택</option>
                            <script>for (let i = 1; i <= 12; i++) document.write(`<option value="${i}">${i}월</option>`);</script>
                        </select>
                    </div>
                    <div class="col form-group">
                        <label class="form-label">일</label>
                        <select id="birthDay" class="form-select" required>
                            <option value="">선택</option>
                            <script>for (let i = 1; i <= 31; i++) document.write(`<option value="${i}">${i}일</option>`);</script>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">태어난 시간</label>
                    <select id="birthTime" class="form-select">
                        <option value="99">모름</option>
                        <option value="0">자시 (23:30 ~ 01:29)</option>
                        <option value="1">축시 (01:30 ~ 03:29)</option>
                        <option value="2">인시 (03:30 ~ 05:29)</option>
                        <option value="3">묘시 (05:30 ~ 07:29)</option>
                        <option value="4">진시 (07:30 ~ 09:29)</option>
                        <option value="5">사시 (09:30 ~ 11:29)</option>
                        <option value="6">오시 (11:30 ~ 13:29)</option>
                        <option value="7">미시 (13:30 ~ 15:29)</option>
                        <option value="8">신시 (15:30 ~ 17:29)</option>
                        <option value="9">유시 (17:30 ~ 19:29)</option>
                        <option value="10">술시 (19:30 ~ 21:29)</option>
                        <option value="11">해시 (21:30 ~ 23:29)</option>
                    </select>
                </div>

                <div class="privacy-agreement-section">
                    <div class="privacy-checkbox-wrapper">
                        <input type="checkbox" id="privacy-agreement" class="privacy-input">
                        <label for="privacy-agreement" class="privacy-label">개인정보 수집 및 이용 동의 (필수)</label>
                    </div>
                    <details class="privacy-details">
                        <summary>자세히 보기</summary>
                        <div class="privacy-content">
                            • 수집 목적: 사주 분석 결과 제공 및 이용 통계<br>
                            • 수집 항목: 이름(또는 닉네임), 생년월일, 성별, 태어난 시간<br>
                            • 보유 기간: 분석 결과 제공 후 즉시 파기<br>
                            <strong>* 실명 대신 닉네임 사용을 권장합니다.</strong><br>
                            * 동의를 거부할 권리가 있으며, 거부 시 서비스 이용이 제한됩니다.<br><br>
                            <strong>❓ 닉네임으로 적어도 괜찮은가요?</strong><br>
                            네, 본 서비스는 이름의 획수를 보는 성명학이 아닌 태어난 날짜 기운을 분석하는 명리학을 기반으로 합니다. 닉네임을 사용하셔도 분석 결과에는 아무런 영향이 없으니
                            안심하세요!
                        </div>
                    </details>
                </div>

                <button type="submit" class="submit-btn" id="main-submit-btn">분석 시작하기 ✨</button>
            </form>

            <button class="share-btn secondary" onclick="shareApp()"
                style="margin-top: 30px; border-style: dashed; opacity: 0.8;">
                지인에게 2026년 사주 선물하기 🎁
            </button>
        </div>

        <!-- 2. 결과 화면 -->
        <div id="result-screen" class="result-section">
            <button class="back-btn" onclick="goBack()">← 다시 입력하기</button>
            <header style="text-align: center; margin-bottom: 20px;">
                <div style="font-size: 0.9rem; opacity: 0.7; margin-bottom: 5px;">Analysis Report</div>
                <h1 id="result-name-title"
                    style="margin: 0; background: linear-gradient(to right, #54a0ff, #00d2d3); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">
                    님 사주 리포트</h1>
                <div id="result-desc" style="margin-top: 10px; font-weight: 300; font-size: 0.9rem;"></div>
            </header>

            <div class="mini-grid">
                <div id="col-hour" class="mini-col" onclick="showTabDetail('hour')">
                    <span id="hour-pillar" class="mini-char">-</span>
                    <div class="col-label">시주</div>
                    <div class="col-sub">말년/자식</div>
                </div>
                <div id="col-day" class="mini-col" onclick="showTabDetail('day')">
                    <span id="day-pillar" class="mini-char">-</span>
                    <div class="col-label">일주(나)</div>
                    <div class="col-sub">본원/배우자</div>
                </div>
                <div id="col-month" class="mini-col" onclick="showTabDetail('month')">
                    <span id="month-pillar" class="mini-char">-</span>
                    <div class="col-label">월주</div>
                    <div class="col-sub">사회/부모</div>
                </div>
                <div id="col-year" class="mini-col" onclick="showTabDetail('year')">
                    <span id="year-pillar" class="mini-char">-</span>
                    <div class="col-label">년주</div>
                    <div class="col-sub">초년/조상</div>
                </div>
            </div>

            <!-- 탭 내용 표시 -->
            <div id="tab-detail-display" class="tab-content-area" style="display:none;">
                <h3 id="detail-title" style="margin-top:0; color:var(--primary-color); font-size: 1.1rem;"></h3>
                <div id="detail-body"></div>
            </div>

            <div id="bottom-analysis">
                <!-- 종합 분석은 항상 상단에 표시 -->
                <div id="view-general" class="analysis-view">
                    <div class="card">
                        <h3>🧙 타고난 기질</h3>
                        <p id="nature-text"></p>
                    </div>
                    <div class="card">
                        <h3>🌟 2026년 운세 미리보기</h3>
                        <p id="fortune-text"></p>
                    </div>
                </div>

                <!-- 상세 분석 탭 (나머지 4개) -->
                <div class="sub-tabs"
                    style="overflow-x: auto; white-space: nowrap; -webkit-overflow-scrolling: touch; margin-top: 10px;">
                    <button class="sub-tab-btn active" id="btn-love" onclick="switchSubTab('love')">💕 연애운</button>
                    <button class="sub-tab-btn" id="btn-wealth" onclick="switchSubTab('wealth')">💰 재물운</button>
                    <button class="sub-tab-btn" id="btn-health" onclick="switchSubTab('health')">🏥 건강운</button>
                    <button class="sub-tab-btn" id="btn-study" onclick="switchSubTab('study')">📚 학업운</button>
                </div>

                <div id="view-love" class="analysis-view">
                    <div class="card">
                        <h3>💕 나의 연애 스타일</h3>
                        <p id="love-text"></p>
                    </div>
                </div>

                <div id="view-wealth" class="analysis-view" style="display:none;">
                    <div class="card">
                        <h3>💰 나의 재물 그릇</h3>
                        <p id="wealth-text"></p>
                    </div>
                </div>

                <div id="view-health" class="analysis-view" style="display:none;">
                    <div class="card">
                        <h3>🏥 나의 건강 관리</h3>
                        <p id="health-text"></p>
                    </div>
                </div>

                <div id="view-study" class="analysis-view" style="display:none;">
                    <div class="card">
                        <h3>📚 나의 학습 스타일</h3>
                        <p id="study-text"></p>
                    </div>
                </div>
            </div>

            <!-- 오행 시각화 분석 -->
            <div class="ohaeng-section">
                <h3>☯️ 오행 분포 (에너지 균형)</h3>
                <div class="ohaeng-chart-container">
                    <canvas id="ohaengRadarChart" width="300" height="300"></canvas>
                </div>

                <details class="ohaeng-info">
                    <summary>🧐 오행 분포는 어떻게 계산되나요?</summary>
                    <div class="info-content">
                        <p>사주(四柱)는 태어난 년, 월, 일, 시를 일컫는 4개의 기둥이며, 각 기둥은 위(천간)와 아래(지지) 두 글자로 이루어져 총
                            <strong>8글자(팔자)</strong>가 됩니다.
                        </p>
                        <ul>
                            <li><strong>분석 방식:</strong> 이 8글자 각각이 가진 고유한 오행(나무, 불, 흙, 쇠, 물) 성질을 모두 분석합니다.</li>
                            <li><strong>그래프 의미:</strong> 오각형 그래프는 나를 구성하는 8가지 기운의 분포를 보여줍니다.</li>
                            <li><strong>균형의 중요성:</strong> 어떤 기운이 많고 적음에 따라 개인의 성정이나 건강, 운의 흐름이 달라집니다. 골고루 분포되어 있을수록 기운이
                                조화롭다고 봅니다.</li>
                        </ul>
                    </div>
                </details>
            </div>

            <div style="margin-top: 20px;">
                <button class="share-btn" onclick="shareApp()">지인에게 2026년 사주 선물하기 🎁</button>
            </div>

            <!-- 하단 광고 -->
            <div class="ad-section"
                style="margin-top: 30px; text-align: center; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px;">
                <p style="font-size: 0.8rem; opacity: 0.7; margin-bottom: 10px;">🎁 오늘의 운세 추천 아이템</p>
                <div
                    style="min-height: 140px; background: rgba(255,255,255,0.05); border-radius: 12px; overflow: hidden;">
                    <script src="https://ads-partners.coupang.com/g.js"></script>
                    <script>new PartnersCoupang.G({ "id": 963044, "template": "carousel", "trackingCode": "AF6477058", "width": "100%", "height": "140" });</script>
                </div>
                <p style="font-size: 9px; opacity: 0.4; margin-top: 10px;">이 포스팅은 쿠팡 파트너스 활동의 일환으로, 이에 따른 일정액의 수수료를
                    제공받습니다.</p>
            </div>
        </div>
    </div>

    <!-- 광고 팝업 -->
    <div id="ad-popup" class="ad-popup-overlay">
        <div class="ad-popup-content">
            <h2 style="color: #fab1a0; margin-bottom: 20px;">🔮 운명을 분석 중입니다...</h2>
            <p style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 20px;">분석이 완료되는 동안<br>본인에게 맞는 행운의 아이템을 확인해 보세요!
            </p>
            <div
                style="min-height: 140px; background: rgba(255,255,255,0.1); border-radius: 10px; overflow: hidden; margin-bottom: 25px;">
                <script src="https://ads-partners.coupang.com/g.js"></script>
                <script>new PartnersCoupang.G({ "id": 963044, "template": "carousel", "trackingCode": "AF6477058", "width": "100%", "height": "140" });</script>
            </div>
            <button class="submit-btn" id="ad-close-btn" onclick="closeAdPopup()">광고 확인 중 (3...)</button>
            <p style="font-size: 9px; opacity: 0.4; margin-top: 15px;">이 포스팅은 쿠팡 파트너스 활동의 일환으로, 이에 따른 일정액의 수수료를 제공받습니다.
            </p>
        </div>
    </div>

    <!-- 로딩 -->
    <div id="loading" class="loading-overlay">
        <div class="spinner"></div>
        <div style="color: white; font-weight: 300;">사주 명식을 분석 중입니다...</div>
    </div>

    <!-- JavaScript 분리 -->
    <script src="script.js?v=20260205015633"></script>
</body>

</html>
