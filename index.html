<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>사주 분석 어플리케이션</title>
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="2026년 나의 사주 - 무료 정밀 분석">
    <meta property="og:description" content="AI가 분석하는 사주! 👀 내 타고난 기질부터 2026년 대운까지 완벽하게 분석해드립니다. (무료)">
    <meta property="og:image" content="https://moonseekerer.github.io/saju_fortune/og-image.png">
    <meta property="og:url" content="https://moonseekerer.github.io/saju_fortune/">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <!-- CSS 분리 -->
    <link rel="stylesheet" href="style.css?v=20260208002949">
</head>

<body>
    <div class="app-container">
        <!-- 1. 입력 화면 -->
        <div id="input-screen" class="input-section">
            <div class="logo-area" style="position: relative;">
                <h1 data-i18n="app_title">2026년 나의 사주</h1>
                <p data-i18n="app_desc">생년월일을 입력하면 당신의 사주를 분석해드립니다.</p>

                <!-- Floating Buttons -->
                <div class="floating-buttons">
                    <button id="lang-btn-old" class="float-btn" onclick="toggleLanguage()"
                        aria-label="언어 변경/Change Language">
                        🌐�
                    </button>
                    <button id="sound-btn-old" class="float-btn" onclick="toggleSound()" aria-label="배경음악 켜기/끄기">
                        🔇
                    </button>
                </div>

                <style>
                    .floating-buttons {
                        position: absolute;
                        top: 0;
                        right: 0;
                        display: flex;
                        flex-direction: column;
                        gap: 15px;
                        /* Increase gap to prevent overlap */
                        z-index: 10;
                    }

                    .float-btn {
                        width: 40px;
                        /* Slightly smaller for header integration */
                        height: 40px;
                        border-radius: 50%;
                        border: none;
                        background: rgba(255, 255, 255, 0.2);
                        backdrop-filter: blur(10px);
                        color: white;
                        font-size: 20px;
                        cursor: pointer;
                        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                        transition: all 0.3s ease;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    }

                    .float-btn:hover {
                        background: rgba(255, 255, 255, 0.3);
                        transform: scale(1.1);
                    }

                    /* Mobile adjustment */
                    @media (max-width: 768px) {
                        .floating-buttons {
                            /* Keep at top relative to header */
                            top: 0;
                            right: 0;
                            bottom: auto;
                        }

                        .float-btn {
                            width: 36px;
                            height: 36px;
                            font-size: 18px;
                        }
                    }
                </style>
            </div>

            <form onsubmit="analyzeSaju(event)">
                <div class="form-group">
                    <label class="form-label" for="userName" data-i18n="label_name">이름 또는 닉네임</label>
                    <input type="text" id="userName" class="form-input" placeholder="예 : 홍길동"
                        data-i18n="placeholder_name">
                </div>


                <div class="form-group">
                    <label class="form-label" data-i18n="label_gender">성별 </label>
                    <div class="gender-selection">
                        <label class="gender-option">
                            <input type="radio" name="userGender" value="male" checked>
                            <span class="gender-btn" data-i18n="gender_male">남성</span>
                        </label>
                        <label class="gender-option">
                            <input type="radio" name="userGender" value="female">
                            <span class="gender-btn" data-i18n="gender_female">여성</span>
                        </label>
                    </div>
                </div>

                <div class="row">
                    <div class="col form-group">
                        <label class="form-label" data-i18n="label_year">생년</label>
                        <input type="number" id="birthYear" class="form-input" placeholder="1990"
                            data-i18n="placeholder_year" min="1900" max="2100" required>
                    </div>
                    <div class="col form-group">
                        <label class="form-label" data-i18n="label_month">월</label>
                        <select id="birthMonth" class="form-select" required>
                            <option value="" data-i18n="select_default">선택</option>
                        </select>
                    </div>
                    <div class="col form-group">
                        <label class="form-label" data-i18n="label_day">일</label>
                        <select id="birthDay" class="form-select" required>
                            <option value="" data-i18n="select_default">선택</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" data-i18n="label_time">태어난 시간</label>
                    <select id="birthTime" class="form-select">
                        <option value="99" data-i18n="time_unknown">모름</option>
                        <option value="0" data-i18n="time_0">자시 (23:30 ~ 01:29)</option>
                        <option value="1" data-i18n="time_1">축시 (01:30 ~ 03:29)</option>
                        <option value="2" data-i18n="time_2">인시 (03:30 ~ 05:29)</option>
                        <option value="3" data-i18n="time_3">묘시 (05:30 ~ 07:29)</option>
                        <option value="4" data-i18n="time_4">진시 (07:30 ~ 09:29)</option>
                        <option value="5" data-i18n="time_5">사시 (09:30 ~ 11:29)</option>
                        <option value="6" data-i18n="time_6">오시 (11:30 ~ 13:29)</option>
                        <option value="7" data-i18n="time_7">미시 (13:30 ~ 15:29)</option>
                        <option value="8" data-i18n="time_8">신시 (15:30 ~ 17:29)</option>
                        <option value="9" data-i18n="time_9">유시 (17:30 ~ 19:29)</option>
                        <option value="10" data-i18n="time_10">술시 (19:30 ~ 21:29)</option>
                        <option value="11" data-i18n="time_11">해시 (21:30 ~ 23:29)</option>
                    </select>
                </div>

                <div class="privacy-agreement-section">
                    <div class="privacy-checkbox-wrapper">
                        <input type="checkbox" id="privacy-agreement" class="privacy-input">
                        <label for="privacy-agreement" class="privacy-label" data-i18n="privacy_agree">개인정보 수집 및 이용 동의
                            (필수)</label>
                    </div>
                    <details class="privacy-details">
                        <summary data-i18n="privacy_details">자세히 보기</summary>
                        <div class="privacy-content" data-i18n="privacy_content">
                            • 수집 목적: 사주 분석 결과 제공 및 이용 통계<br>
                            • 수집 항목: 이름(또는 닉네임, 선택), 생년월일, 성별, 태어난 시간<br>
                            • 보유 기간: 3년 (통계 분석 목적, 개인 식별 정보 비식별화 처리)<br>
                            <strong>* 이름/닉네임은 선택사항이며, 입력하지 않아도 분석이 가능합니다.</strong><br>
                            <strong>* 실명 대신 닉네임 사용을 권장합니다.</strong><br>
                            * 동의를 거부할 권리가 있으며, 거부 시 서비스 이용이 제한됩니다.<br><br>
                            <strong>❓ 닉네임으로 적어도 괜찮은가요?</strong><br>
                            네, 본 서비스는 이름의 획수를 보는 성명학이 아닌 태어난 날짜 기운을 분석하는 명리학을 기반으로 합니다. 닉네임을 사용하셔도 분석 결과에는 아무런 영향이 없으니
                            안심하세요!
                        </div>
                    </details>
                </div>

                <button type="submit" class="submit-btn" id="main-submit-btn" data-i18n="btn_submit">분석 시작하기 ✨</button>
            </form>

            <button class="premium-share-btn" onclick="shareApp()">
                <div class="btn-content">
                    <span class="btn-icon">🔗</span>
                    <div class="btn-text">
                        <span class="main-text" data-i18n="share_test_title">친구에게 테스트 공유하기</span>
                        <span class="sub-text" data-i18n="share_test_desc">2026년 운세를 무료로 확인해보세요</span>
                    </div>
                </div>
            </button>

            <button class="premium-share-btn" onclick="showHistoryList()" style="margin-top: 15px;">
                <div class="btn-content">
                    <span class="btn-icon">📜</span>
                    <div class="btn-text">
                        <span class="main-text" data-i18n="history_title">최근 분석 기록</span>
                        <span class="sub-text" data-i18n="history_desc">이전에 분석한 사주를 다시 확인하세요</span>
                    </div>
                </div>
            </button>

            <button class="premium-share-btn" onclick="window.location.href='lunar_converter.html'"
                style="margin-top: 15px;">
                <div class="btn-content">
                    <span class="btn-icon">📅</span>
                    <div class="btn-text">
                        <span class="main-text" data-i18n="lunar_converter_title">음력/양력 변환기</span>
                        <span class="sub-text" data-i18n="lunar_converter_desc">생년월일을 음력↔양력으로 변환하세요</span>
                    </div>
                </div>
            </button>
        </div>

        <!-- 최근 기록 모달 -->
        <div id="history-modal" class="modal-overlay"
            style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); z-index:10000; justify-content:center; align-items:center; backdrop-filter:blur(5px);">
            <div class="modal-content"
                style="background:#1a1a2e; width:90%; max-width:400px; border-radius:20px; padding:25px; border:1px solid rgba(255,255,255,0.1); position:relative;">
                <button onclick="closeHistoryModal()"
                    style="position:absolute; top:15px; right:15px; background:none; border:none; color:white; font-size:1.5rem; cursor:pointer;">&times;</button>
                <h2 style="color:#54a0ff; margin-top:0;" data-i18n="history_modal_title">최근 기록</h2>
                <div id="history-list" style="max-height:300px; overflow-y:auto; margin-top:20px;">
                    <!-- 기록이 여기에 동적으로 추가됨 -->
                </div>
                <div id="empty-history" style="text-align:center; padding:20px; opacity:0.6; display:none;"
                    data-i18n="history_empty">기록이 없습니다.</div>
            </div>
        </div>

        <!-- 로딩 화면 -->
        <div id="loading"
            style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:9999; justify-content:center; align-items:center; flex-direction:column;">
            <div style="font-size:3rem; margin-bottom:20px;">🔮</div>
            <div style="color:white; font-size:1.2rem;" data-i18n="loading_msg">사주를 분석하고 있습니다...</div>
        </div>

        <!-- 광고 화면 -->
        <div id="ad-screen"
            style="display:none; flex-direction:column; justify-content:center; align-items:center; min-height:100vh; padding:20px;">
            <div style="text-align:center; max-width:600px;">
                <h2 style="margin-bottom:30px;" data-i18n="ad_title">🎁 잠깐! 오늘의 운세 아이템을 확인해보세요</h2>

                <!-- 쿠팡 파트너스 광고 -->
                <div
                    style="margin:20px 0; background: rgba(255,255,255,0.05); border-radius: 12px; overflow: hidden; padding:20px;">
                    <p style="font-size: 0.9rem; margin-bottom: 15px; color: #fff; text-shadow: 0 1px 4px rgba(0,0,0,0.5);"
                        data-i18n="ad_desc">
                        👇 이 링크를 클릭해주시면<br>제작자에게 큰 도움이 됩니다 🙇‍♂️</p>
                    <div style="min-height: 140px;">
                        <script src="https://ads-partners.coupang.com/g.js"></script>
                        <script>new PartnersCoupang.G({ "id": 963044, "template": "carousel", "trackingCode": "AF6477058", "width": "100%", "height": "140" });</script>
                    </div>
                    <p style="font-size: 11px; margin-top: 15px; color: #aaa;" data-i18n="ad_disclaimer">이 포스팅은 쿠팡 파트너스
                        활동의 일환으로, 이에 따른 일정액의 수수료를
                        제공받습니다.</p>
                </div>

                <div style="margin:30px 0;">
                    <div style="font-size:3rem; font-weight:bold; color:var(--primary-color);" id="countdown-number">5
                    </div>
                    <p style="color:#666;" data-i18n="ad_wait_msg">초 후에 결과를 볼 수 있습니다</p>
                </div>

                <button id="skip-ad-btn" class="submit-btn" onclick="skipAd()" disabled style="opacity:0.5;"
                    data-i18n="btn_wait">
                    기다리는 중...
                </button>
            </div>
        </div>

        <!-- 2. 결과 화면 -->
        <div id="result-screen" class="result-section">
            <button class="back-btn" onclick="goBack()" data-i18n="btn_back">← 다시 입력하기</button>
            <header style="text-align: center; margin-bottom: 20px;">
                <div style="font-size: 0.9rem; opacity: 0.7; margin-bottom: 5px;" data-i18n="analysis_report">Analysis
                    Report</div>
                <h1 id="result-name-title"
                    style="margin: 0; background: linear-gradient(to right, #54a0ff, #00d2d3); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">
                    님 사주 리포트</h1>
                <div id="result-desc" style="margin-top: 10px; font-weight: 300; font-size: 0.9rem;"></div>
            </header>

            <div class="mini-grid">
                <div id="col-hour" class="mini-col" onclick="showTabDetail('hour')">
                    <div id="hour-pillar" class="mini-char">-</div>
                    <div class="col-label" data-i18n="tab_hour">시주</div>
                    <div class="col-sub" data-i18n="tab_hour_sub">말년/자식</div>
                </div>
                <div id="col-day" class="mini-col" onclick="showTabDetail('day')">
                    <div id="day-pillar" class="mini-char">-</div>
                    <div class="col-label" data-i18n="tab_day">일주(나)</div>
                    <div class="col-sub" data-i18n="tab_day_sub">본원/배우자</div>
                </div>
                <div id="col-month" class="mini-col" onclick="showTabDetail('month')">
                    <div id="month-pillar" class="mini-char">-</div>
                    <div class="col-label" data-i18n="tab_month">월주</div>
                    <div class="col-sub" data-i18n="tab_month_sub">사회/부모</div>
                </div>
                <div id="col-year" class="mini-col" onclick="showTabDetail('year')">
                    <div id="year-pillar" class="mini-char">-</div>
                    <div class="col-label" data-i18n="tab_year">년주</div>
                    <div class="col-sub" data-i18n="tab_year_sub">초년/조상</div>
                </div>
            </div>

            <!-- 탭 내용 표시 -->
            <div id="tab-detail-display" class="tab-content-area" style="display:none;">
                <h3 id="detail-title" style="margin-top:0; color:var(--primary-color); font-size: 1.1rem;"></h3>
                <div id="detail-body"></div>
            </div>

            <div id="bottom-analysis">
                <!-- 종합 분석은 항상 상단에 표시 -->
                <div id="view-general" class="analysis-view">
                    <div class="card">
                        <h3 data-i18n="card_nature">🧙 타고난 기질</h3>
                        <p id="nature-text"></p>
                    </div>
                    <div class="card">
                        <h3 data-i18n="card_fortune">🌟 2026년 운세 미리보기</h3>
                        <p id="fortune-text"></p>
                    </div>
                </div>

                <!-- 상세 분석 탭 (나머지 4개) -->
                <div class="sub-tabs">
                    <button class="sub-tab-btn active" id="btn-love" onclick="switchSubTab('love')"
                        data-i18n="subtab_love">💕 연애운</button>
                    <button class="sub-tab-btn" id="btn-wealth" onclick="switchSubTab('wealth')"
                        data-i18n="subtab_wealth">💰 재물운</button>
                    <button class="sub-tab-btn" id="btn-health" onclick="switchSubTab('health')"
                        data-i18n="subtab_health">🏥 건강운</button>
                    <button class="sub-tab-btn" id="btn-study" onclick="switchSubTab('study')"
                        data-i18n="subtab_study">📚 학업운</button>
                </div>

                <div id="view-love" class="analysis-view">
                    <div class="card">
                        <h3 data-i18n="card_love">💕 나의 연애 스타일</h3>
                        <p id="love-text"></p>
                    </div>
                </div>

                <div id="view-wealth" class="analysis-view" style="display:none;">
                    <div class="card">
                        <h3 data-i18n="card_wealth">💰 나의 재물 그릇</h3>
                        <p id="wealth-text"></p>
                    </div>
                </div>

                <div id="view-health" class="analysis-view" style="display:none;">
                    <div class="card">
                        <h3 data-i18n="card_health">🏥 나의 건강 관리</h3>
                        <p id="health-text"></p>
                    </div>
                </div>

                <div id="view-study" class="analysis-view" style="display:none;">
                    <div class="card">
                        <h3 data-i18n="card_study">📚 나의 학습 스타일</h3>
                        <p id="study-text"></p>
                    </div>
                </div>
            </div>

            <!-- 오행 시각화 분석 -->
            <div class="ohaeng-section">
                <h3 data-i18n="ohaeng_title">☯️ 오행 분포 (에너지 균형)</h3>
                <div class="ohaeng-chart-container">
                    <canvas id="ohaengRadarChart" width="300" height="300"></canvas>
                </div>

                <details class="ohaeng-info">
                    <summary data-i18n="ohaeng_scaling_title">🧐 오행 분포는 어떻게 계산되나요?</summary>
                    <div class="info-content" data-i18n="ohaeng_desc">
                        <p>사주(四柱)는 태어난 년, 월, 일, 시를 일컫는 4개의 기둥이며, 각 기둥은 위(천간)와 아래(지지) 두 글자로 이루어져 총
                            <strong>8글자(팔자)</strong>가 됩니다.
                        </p>
                        <ul>
                            <li><strong>분석 방식:</strong> 이 8글자 각각이 가진 고유한 오행(나무, 불, 흙, 쇠, 물) 성질을 모두 분석합니다.</li>
                            <li><strong>그래프 의미:</strong> 오각형 그래프는 나를 구성하는 8가지 기운의 분포를 보여줍니다.</li>
                            <li><strong>균형의 중요성:</strong> 어떤 기운이 많고 적음에 따라 개인의 성정이나 건강, 운의 흐름이 달라집니다. 골고루 분포되어 있을수록 기운이
                                조화롭다고 봅니다.</li>
                        </ul>
                    </div>
                </details>
            </div>

            <div style="margin-top: 20px;">
                <button class="premium-share-btn result-share" onclick="shareApp()">
                    <div class="btn-content">
                        <span class="btn-icon">🔗</span>
                        <div class="btn-text">
                            <span class="main-text" data-i18n="share_result_title">내 결과 친구에게 공유하기</span>
                            <span class="sub-text" data-i18n="share_result_desc">친구들은 어떤 사주를 가지고 있을까요? 👀</span>
                        </div>
                    </div>
                </button>
            </div>

            <!-- 하단 광고 -->
            <div class="ad-section"
                style="margin-top: 30px; text-align: center; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px;">
                <p style="font-size: 0.9rem; margin-bottom: 15px; color: #fff;" data-i18n="footer_ad">🙇‍♂️ 아래 링크
                    클릭은<br>개발자에게 큰 힘이 됩니다!</p>
                <div
                    style="min-height: 140px; background: rgba(255,255,255,0.05); border-radius: 12px; overflow: hidden;">
                    <script src="https://ads-partners.coupang.com/g.js"></script>
                    <script>new PartnersCoupang.G({ "id": 963044, "template": "carousel", "trackingCode": "AF6477058", "width": "100%", "height": "140" });</script>
                </div>
                <p style="font-size: 11px; margin-top: 15px; color: #aaa;" data-i18n="footer_disclaimer">이 포스팅은 쿠팡 파트너스
                    활동의 일환으로, 이에 따른 일정액의 수수료를
                    제공받습니다.</p>
            </div>
        </div>
        <footer
            style="width: 100%; text-align: center; padding: 40px 0 20px; font-size: 0.7rem; color: rgba(255,255,255,0.3); clear: both;">
            <p style="margin: 0;">Ver 2026.02.08</p>
            <p style="margin: 4px 0 0;">Copyright &copy; moonseeker. All rights reserved.</p>
        </footer>
    </div>



    <!-- Global Floating Buttons -->
    <div class="global-floating-buttons">
        <button id="lang-btn" class="float-btn" onclick="toggleLanguage()" aria-label="언어 변경/Change Language">
            🌐
        </button>
        <button id="sound-btn" class="float-btn" onclick="toggleSound()" aria-label="배경음악 켜기/끄기">
            🔇
        </button>
    </div>

    <script src="script.js?v=20260208002949"></script>
</body>

</html>
